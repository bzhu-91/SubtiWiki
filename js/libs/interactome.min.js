!function(){var a=3.141592653,c={deepExtend:function(t,e,n){for(var i in e)if(e.hasOwnProperty(i))if(e[i]&&e[i].constructor==Object)void 0===t[i]&&(t[i]={}),t[i].constructor==Object&&c.deepExtend(t[i],e[i]);else if(e[i]&&e[i]instanceof Array){t[i]=[];for(var o=0;o<e[i].length;o++)t[i].push(e[i][o])}else null==e[i]&&n?delete t[i]:null!=e[i]&&(t[i]=e[i]);return t},attrNS:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttributeNS(null,n,e[n])},attr:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])},elNS:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&c.attrNS(g,e),n},el:function(t,e){var n=document.createElement(t);return e&&c.attr(n,e),n},ucfirst:function(t){return t[0].toUpperCase()+t.slice(1)},fireEvent:function(t,e){var n;document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=document.createEventObject()).eventType=e,n.eventName=e,document.createEvent?t.dispatchEvent(n):t.fireEvent("on"+n.eventType,n)}};window.Interactome=window.Interactome||{};var n=function(){var i,e={},n={},o={},s={},r={};this.x=0,this.y=0,this._setPosition=function(t,e){c.attrNS(i,{x:t,y:e})},this.hide=function(){c.attrNS(i,{visibility:"hidden"})},this.show=function(){c.attrNS(i,{visibility:"show"})},this.locate=function(t,e){null==t&&(t=this.x),null==e&&(e=this.y),this.x=t,this.y=e,this._setPosition(t,e)},this.getOptions=function(){return s},this.setDefaultOptions=function(t){e=c.deepExtend(e,t,!0),this.composeOptions(),this._applyOptions(s)},this.setPrivateOptions=function(t){o=c.deepExtend(o,t,!0),this.composeOptions(),this._applyOptions(s)},this.setGlobalOptions=function(t){n=c.deepExtend(n,t,!0),this.composeOptions(),this._applyOptions(s)},this.composeOptions=function(){s=c.deepExtend(s,e),s=c.deepExtend(s,n),s=c.deepExtend(s,o)},this._applyOptions=function(){},this.setRootElement=function(t){i=t},this.setOptions=function(t){this.setPrivateOptions(t)},this.on=function(t,e){t in r||(r[t]=[]),r[t].push(e),i.addEventListener(t,e)},this.off=function(e,t){if(t){var n=(r[e]||[]).indexOf(t);-1!=n&&(r[e]=r[e].splice(n,1),i.removeEventListener(e,t))}else(r[e]||[]).forEach(function(t){i.removeEventListener(e,t)})},this.appendTo=function(t){t.appendChild(i)},this.getBBox=function(){return i.getBBox()}},r={width:"auto",height:"auto",background:"transparent",node:{color:"#8BC34A",size:12,textColor:"black",textSize:"12pt"},nodeHighlight:{color:"red"},edge:{color:"gray",strokeWidth:1},edgeHighlight:{color:"red"}},s=function(e){var o=c.elNS("g"),h=c.elNS("text"),n=c.elNS("circle");o.appendChild(h),o.appendChild(n),this.setRootElement(o),c.attrNS(o,{id:e.id||"",x:0,y:0,class:"node"}),h.textContent=e.label||"",c.deepExtend(this,e),this.setDefaultOptions(r.node),this._applyOptions=function(t){n.setAttributeNS(null,"fill",t.color),n.setAttributeNS(null,"r",t.size),h.setAttributeNS(null,"fill",t.textColor),h.setAttributeNS(null,"font-size",t.textSize)};var i={};for(var t in["color","size","textSize","textColor"].forEach(function(t){t in e&&(i[t]=e[t])}),this.setPrivateOptions(i),s)s.hasOwnProperty(t)&&s[t]&&s[t]instanceof Function&&t.startsWith("on")&&this.on(t.substr(2),s[t]);this.highlight=function(t){var e=c.deepExtend(this.getOptions(),r.nodeHighlight);this._applyOptions(e)},this.unhighlight=function(){this.setOptions({})},this.parent=Object.getPrototypeOf(this),this._setPosition=function(t,e,n,i){c.attrNS(o,{transform:"translate("+t+","+e+")"}),c.attrNS(h,{x:n,y:i})},this.locate=function(t,e){this.theta=e;var n=t*Math.cos(e),i=t*Math.sin(e);this.x=n,this.y=i;var o=h.getBBox(),s=0,r=0;e<2*a&&1.5*a<=e?s=r=0:0<=e&&e<.5*a?r=o.height:.5*a<=e&&e<a?(s=-o.width,r=o.height):s=-o.width,s+=1.2*this.getOptions().size*Math.cos(e),r+=1.2*this.getOptions().size*Math.sin(e),this._setPosition(n,i,s,r)}},o=function(e){var n;e.from==e.to?(n=c.elNS("circle"),c.attrNS(n,{r:30,fill:"transparent"})):n=c.elNS("line"),this.setRootElement(n),c.attrNS(n,{class:"edge",id:e.from.id+"-"+e.to.id}),c.deepExtend(this,e),this._applyOptions=function(t){c.attrNS(n,{"stroke-width":t.strokeWidth,stroke:t.color})};var i={};for(var t in["strokeWidth","color"].forEach(function(t){t in e&&(i[t]=e[t])}),this.setPrivateOptions(i),this.locate=function(){e.from==e.to?c.attrNS(n,{cx:30*Math.cos(e.from.theta)+e.from.x,cy:30*Math.sin(e.from.theta)+e.from.y}):c.attrNS(n,{x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y})},o)o.hasOwnProperty(t)&&o[t]&&o[t]instanceof Function&&t.startsWith("on")&&this.on(t.substr(2),o[t]);this.highlight=function(t){var e=c.deepExtend(this.getOptions(),r.nodeHighlight);this._applyOptions(e)},this.unhighlight=function(){this.setOptions({})}},h=function(t,e){switch(t){case"node":return s.prototype=new n,new s(e);case"edge":return o.prototype=new n,new o(e);default:return console.error("Object of type "+type+" can not be handled"),null}};Interactome.dataSet=function(t,e){var n=this,i={};this.edges=[],this.nodes=[],t.forEach(function(t){i[t.id]=h("node",t),n.nodes.push(i[t.id])}),e.forEach(function(t){t.from=i[t.from],t.to=i[t.to],n.edges.push(h("edge",t))}),this.getNodeById=function(t){return i[t]},this.getEdgeById=function(e){var n;return this.edges.forEach(function(t){e!=t.from.id+"-"+t.to.id||(n=t)}),n},this.getConnectedEdges=function(e){var n=[];return this.edges.forEach(function(t){t.from.id!=e&&t.to.id!=e||n.push(t)}),n},this.getConnectedNodes=function(e){var n=[];return this.edges.forEach(function(t){t.from.id==e&&n.push(t.to),t.to.id==e&&n.push(t.from)}),n}},Interactome.diagram=function(t,i,e){Interactome.diagram.prototype=new n;var o=c.elNS("svg"),s=c.elNS("g");for(this.setRootElement(o),o.appendChild(s),o.setAttributeNS(null,"preserveAspectRatio","none");t.firstElementChild;)t.removeChild(t.firstElementChild);t.appendChild(o),i.edges.forEach(function(t){t.appendTo(s)}),i.nodes.forEach(function(t){t.appendTo(s)}),this._applyOptions=function(e){i.edges.forEach(function(t){t.setGlobalOptions(e.edge)}),i.nodes.forEach(function(t){t.setGlobalOptions(e.node)}),c.attrNS(o,{fill:e.background}),R=i.nodes.length*e.node.size/a*1.5,R<50&&(R=50),theta=2*a/i.nodes.length;for(var t=0;t<i.nodes.length;t++)i.nodes[t].locate(R,theta*t);for(t=0;t<i.edges.length;t++)i.edges[t].locate();"auto"==e.width?c.attrNS(o,{width:s.getBBox().width+20}):c.attrNS(o,{width:e.width}),"auto"==e.height?c.attrNS(o,{height:s.getBBox().height+20}):c.attrNS(o,{height:e.height});var n=Math.min((o.getBoundingClientRect().width-10)/s.getBBox().width,(o.getBoundingClientRect().height-10)/s.getBBox().height);c.attrNS(s,{transform:"translate("+(s.getBBox().width/2*n+10)+","+(s.getBBox().height/2*n+10)+") scale("+n+")"}),"auto"==e.width&&c.attrNS(o,{width:s.getBBox().width*n+20}),"auto"==e.height&&c.attrNS(o,{height:s.getBBox().height*n+20})},this.setDefaultOptions(r),this.setGlobalOptions(e),this.parent=Object.getPrototypeOf(this),this.on=function(t,e){this.parent.on(t,function(t){if(t.target){for(p=t.target;p!=o&&!p.getAttribute("class");)p=p.parentNode;p!=o&&("node"==p.getAttribute("class")&&(t.currentNode=i.getNodeById(p.getAttribute("id"))),"edge"==p.getAttribute("class")&&(t.currentEdge=i.getEdgeById(p.getAttribute("id"))))}e.apply(this,[t])})}},Interactome.diagram.prototype=new n}();